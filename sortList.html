<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>sort list</title>


    <script>

    // グラフを表示するためのリスト
    var list = [230,450,140];

    function drawGraph(){
      var begin = new Date() - 0;
      var graph1 = document.getElementById('bar1');
      var graph2 = document.getElementById('bar2');
      var graph3 = document.getElementById('bar3');
      //グラフの長さを調整
      graph1.style.top = 500-list[0] + 'px';
      graph2.style.top = 500-list[1] + 'px';
      graph3.style.top = 500-list[2] + 'px';

      graph1.style.height = list[0] + 'px';
      graph2.style.height = list[1] + 'px';
      graph3.style.height = list[2] + 'px';
    }
    //読み込み時にグラフを初期化
    window.onload = drawGraph;

    //リストをソートする
    function sortList(){
      list.sort(function(a,b){
        if(a<b) return -1;
        if(a>b) return 1;
        return 0;
      });
      execAnimation();
    }


    //グラフの動きをアニメーションする
    function execAnimation(){
      var begin = new Date() - 0;
      var graph1 = document.getElementById('bar1');
      var graph2 = document.getElementById('bar2');
      var graph3 = document.getElementById('bar3');

      graph1.style.top = 500 + 'px';
      graph2.style.top = 500 + 'px';
      graph3.style.top = 500 + 'px';

      //element.style.top = current / 10 + 'px';
      graph1.style.height = 10 + 'px';
      graph2.style.height = 10 + 'px';
      graph3.style.height = 10 + 'px';

      var id = setInterval(function(){
        var current = new Date() - begin;
        if (current > 1000){
          clearInterval(id);
          current = 1000; // 1000以上になっているので，調整する
        }
        //element.style.top = current / 10 + 'px';
        graph1.style.top = 500-list[0]*(current/1000) + 'px';
        graph2.style.top = 500-list[1]*(current/1000) + 'px';
        graph3.style.top = 500-list[2]*(current/1000) + 'px';

        graph1.style.height = list[0]*(current/1000) + 'px';
        graph2.style.height = list[1]*(current/1000) + 'px';
        graph3.style.height = list[2]*(current/1000) + 'px';
          }, 10); // 10ms置きに実行
      }
    </script>
  </head>
  <body>

      <div id="bar1" style="position: absolute; top: 500px; left: 100px; height: 10px; width: 50px; background: rgb(255, 170, 255);">
      </div>
      <div id="bar2" style="position: absolute; top: 500px; left: 200px; height: 10px; width: 50px; background: rgb(255, 170, 255);">
      </div>
      <div id="bar3" style="position: absolute; top: 500px; left: 300px; height: 10px; width: 50px; background: rgb(255, 170, 255);">
      </div>
      <button onclick="sortList()">アニメーション実行</button>

  </body>
</html>